<ReportsScreen>:
    name: 'reports'
    md_bg_color: [0.94, 0.94, 0.94, 1]
    
    MDScrollView:
        
        MDBoxLayout:
            orientation: 'vertical'
            spacing: "12dp"
            padding: "16dp"
            size_hint_y: None
            height: self.minimum_height
            min_height: "800dp"  # Minimum height to ensure scrolling works
            
            # Header Section
            MDCard:
                size_hint_y: None
                height: "80dp"
                elevation: 0
                line_color: [0.4, 0.4, 0.4, 1]
                md_bg_color: [0.639, 0.114, 0.114, 1]
                padding: "16dp"
                
                MDBoxLayout:
                    orientation: 'horizontal'
                    spacing: "16dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        
                        MDLabel:
                            text: "[size=24][font=Brico]Financial Reports[/font]"
                            markup: True
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            font_style: "H6"
                            halign: "left"
                            valign: "center"
                            size_hint_y: None
                            height: "32dp"
                        
                        MDLabel:
                            text: "Generate comprehensive business reports and insights"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 0.8]
                            font_style: "Body2"
                            halign: "left"
                            valign: "center"
                    
                    MDBoxLayout:
                        orientation: 'horizontal'
                        spacing: "8dp"
                        size_hint_x: None
                        width: "200dp"
                        
                        MDIconButton:
                            icon: "refresh"
                            theme_icon_color: "Custom"
                            icon_color: [1, 1, 1, 1]
                            on_release: root.refresh_reports()
                        
            # Navigation Buttons
            MDGridLayout:
                cols: 6
                spacing: "12dp"
                size_hint_y: None
                height: "60dp"
                
                MDFlatButton:
                    text: "[color=#ffffff][size=25][font=Brico]POINT OF SALE[/font][/color]"
                    size_hint_x: 1
                    md_bg_color: [0.639, 0.114, 0.114, 1]
                    elevation: 0
                    on_release: root.switch_screen('main')
                
                MDFlatButton:
                    id: inventory_button
                    text: "[color=#ffffff][size=25][font=Brico]INVENTORY[/font][/color]"
                    size_hint_x: 1
                    md_bg_color: [0.639, 0.114, 0.114, 1]
                    elevation: 0
                    on_release: root.switch_screen('inventory')
                
                MDFlatButton:
                    id: transactions_button
                    text: "[color=#ffffff][size=25][font=Brico]TRANSACTIONS[/font][/color]"
                    size_hint_x: 1
                    md_bg_color: [0.639, 0.114, 0.114, 1]
                    elevation: 0
                    on_release: root.switch_screen('transactions')

                MDFlatButton:
                    id: payments_button
                    text: "[color=#ffffff][size=25][font=Brico]PAYMENTS[/font][/color]"
                    size_hint_x: 1
                    md_bg_color: [0.639, 0.114, 0.114, 1]
                    elevation: 0
                    on_release: root.switch_screen('payments')
                
                MDFlatButton:
                    text: "[color=#ffffff][size=25][font=Brico]REPORTS[/font][/color]"
                    size_hint_x: 1
                    md_bg_color: [0.639, 0.114, 0.114, 1]
                    elevation: 0
                    disabled: True
                
                MDFlatButton:
                    id: user_management_button
                    text: "[color=#ffffff][size=25][font=Brico]USERS[/font][/color]"
                    size_hint_x: 1
                    md_bg_color: [0.639, 0.114, 0.114, 1]
                    elevation: 0
                    on_release: root.switch_screen('user_management')
            
            # Quick Stats Cards
            MDGridLayout:
                cols: 4
                spacing: "12dp"
                size_hint_y: None
                height: "120dp"
                
                # Sales Card
                MDCard:
                    size_hint_y: None
                    height: "100dp"
                    elevation: 0
                    line_color: [0.4, 0.4, 0.4, 1]
                    md_bg_color: [0.2, 0.6, 0.2, 1]
                    padding: "16dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "8dp"
                        
                        MDIcon:
                            icon: "cash-multiple"
                            theme_icon_color: "Custom"
                            icon_color: [1, 1, 1, 1]
                            size_hint: None, None
                            size: "32dp", "32dp"
                            pos_hint: {"center_x": 0.5}
                        
                        MDLabel:
                            id: total_sales_label
                            text: "₱0.00"
                            font_style: "H6"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            halign: "center"
                        
                        MDLabel:
                            text: "Total Sales"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 0.8]
                            halign: "center"
                
                # Expenses Card
                MDCard:
                    size_hint_y: None
                    height: "100dp"
                    elevation: 0
                    line_color: [0.4, 0.4, 0.4, 1]
                    md_bg_color: [0.8, 0.2, 0.2, 1]
                    padding: "16dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "8dp"
                        
                        MDIcon:
                            icon: "credit-card-outline"
                            theme_icon_color: "Custom"
                            icon_color: [1, 1, 1, 1]
                            size_hint: None, None
                            size: "32dp", "32dp"
                            pos_hint: {"center_x": 0.5}
                        
                        MDLabel:
                            id: total_expenses_label
                            text: "₱0.00"
                            font_style: "H6"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            halign: "center"
                        
                        MDLabel:
                            text: "Total Expenses"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 0.8]
                            halign: "center"
                
                # Profit Card
                MDCard:
                    size_hint_y: None
                    height: "100dp"
                    elevation: 0
                    line_color: [0.4, 0.4, 0.4, 1]
                    md_bg_color: [0.2, 0.4, 0.8, 1]
                    padding: "16dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "8dp"
                        
                        MDIcon:
                            icon: "trending-up"
                            theme_icon_color: "Custom"
                            icon_color: [1, 1, 1, 1]
                            size_hint: None, None
                            size: "32dp", "32dp"
                            pos_hint: {"center_x": 0.5}
                        
                        MDLabel:
                            id: net_profit_label
                            text: "₱0.00"
                            font_style: "H6"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            halign: "center"
                        
                        MDLabel:
                            text: "Net Profit"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 0.8]
                            halign: "center"
                
                # Inventory Value Card
                MDCard:
                    size_hint_y: None
                    height: "100dp"
                    elevation: 0
                    line_color: [0.4, 0.4, 0.4, 1]
                    md_bg_color: [0.6, 0.4, 0.2, 1]
                    padding: "16dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "8dp"
                        
                        MDIcon:
                            icon: "package-variant"
                            theme_icon_color: "Custom"
                            icon_color: [1, 1, 1, 1]
                            size_hint: None, None
                            size: "32dp", "32dp"
                            pos_hint: {"center_x": 0.5}
                        
                        MDLabel:
                            id: inventory_value_label
                            text: "₱0.00"
                            font_style: "H6"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            halign: "center"
                        
                        MDLabel:
                            text: "Inventory Value"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 0.8]
                            halign: "center"
            
            # Reports Section
            MDCard:
                size_hint_y: None
                height: "520dp"
                elevation: 0
                line_color: [0.4, 0.4, 0.4, 1]
                padding: "16dp"
                
                MDBoxLayout:
                    orientation: 'vertical'
                    spacing: "12dp"
                    
                    MDLabel:
                        text: "[size=18][font=Brico]Available Reports[/font]"
                        markup: True
                        font_style: "H6"
                        size_hint_y: None
                        height: "32dp"
                        theme_text_color: "Primary"
                    
                    # Report Buttons Grid
                    MDGridLayout:
                        cols: 2
                        spacing: "12dp"
                        size_hint_y: None
                        height: "420dp"
                        
                        # Sales Report
                        MDCard:
                            elevation: 0
                            line_color: [0.4, 0.4, 0.4, 1]
                            md_bg_color: [1, 1, 1, 1]
                            padding: "16dp"
                            on_release: root.switch_screen('sales_report')
                            
                            MDBoxLayout:
                                orientation: 'vertical'
                                spacing: "12dp"
                                
                                MDIcon:
                                    icon: "chart-line"
                                    theme_icon_color: "Custom"
                                    icon_color: [0.639, 0.114, 0.114, 1]
                                    size_hint: None, None
                                    size: "48dp", "48dp"
                                    pos_hint: {"center_x": 0.5}
                                
                                MDLabel:
                                    text: "Sales Report"
                                    font_style: "Subtitle1"
                                    halign: "center"
                                    theme_text_color: "Primary"
                                
                                MDLabel:
                                    text: "Detailed sales analysis with trends and patterns"
                                    font_style: "Body2"
                                    halign: "center"
                                    theme_text_color: "Secondary"
                        
                        # Inventory Report
                        MDCard:
                            elevation: 0
                            line_color: [0.4, 0.4, 0.4, 1]
                            md_bg_color: [1, 1, 1, 1]
                            padding: "16dp"
                            on_release: root.generate_inventory_report()
                            
                            MDBoxLayout:
                                orientation: 'vertical'
                                spacing: "12dp"
                                
                                MDIcon:
                                    icon: "cube-outline"
                                    theme_icon_color: "Custom"
                                    icon_color: [0.639, 0.114, 0.114, 1]
                                    size_hint: None, None
                                    size: "48dp", "48dp"
                                    pos_hint: {"center_x": 0.5}
                                
                                MDLabel:
                                    text: "Inventory Report"
                                    font_style: "Subtitle1"
                                    halign: "center"
                                    theme_text_color: "Primary"
                                
                                MDLabel:
                                    text: "Stock levels, low inventory alerts, and valuation"
                                    font_style: "Body2"
                                    halign: "center"
                                    theme_text_color: "Secondary"
                        
                        # Ledger Report
                        MDCard:
                            elevation: 0
                            line_color: [0.4, 0.4, 0.4, 1]
                            md_bg_color: [1, 1, 1, 1]
                            padding: "16dp"
                            on_release: root.switch_screen('ledger')
                            
                            MDBoxLayout:
                                orientation: 'vertical'
                                spacing: "12dp"
                                
                                MDIcon:
                                    icon: "book-open-page-variant"
                                    theme_icon_color: "Custom"
                                    icon_color: [0.639, 0.114, 0.114, 1]
                                    size_hint: None, None
                                    size: "48dp", "48dp"
                                    pos_hint: {"center_x": 0.5}
                                
                                MDLabel:
                                    text: "Ledger"
                                    font_style: "Subtitle1"
                                    halign: "center"
                                    theme_text_color: "Primary"
                                
                                MDLabel:
                                    text: "View detailed ledger accounts and trial balance"
                                    font_style: "Body2"
                                    halign: "center"
                                    theme_text_color: "Secondary"
                        
                        # Financial Report
                        MDCard:
                            elevation: 0
                            line_color: [0.4, 0.4, 0.4, 1]
                            md_bg_color: [1, 1, 1, 1]
                            padding: "16dp"
                            on_release: root.generate_financial_report()
                            
                            MDBoxLayout:
                                orientation: 'vertical'
                                spacing: "12dp"
                                
                                MDIcon:
                                    icon: "file-chart"
                                    theme_icon_color: "Custom"
                                    icon_color: [0.639, 0.114, 0.114, 1]
                                    size_hint: None, None
                                    size: "48dp", "48dp"
                                    pos_hint: {"center_x": 0.5}
                                
                                MDLabel:
                                    text: "Financial Report"
                                    font_style: "Subtitle1"
                                    halign: "center"
                                    theme_text_color: "Primary"
                                
                                MDLabel:
                                    text: "Income statement, balance sheet, and cash flow"
                                    font_style: "Body2"
                                    halign: "center"
                                    theme_text_color: "Secondary"
            
            # Recent Activity
            MDCard:
                size_hint_y: None
                height: "220dp"
                elevation: 0
                line_color: [0.4, 0.4, 0.4, 1]
                padding: "16dp"
                
                MDBoxLayout:
                    orientation: 'vertical'
                    spacing: "12dp"
                    
                    MDLabel:
                        text: "[size=18][font=Brico]Recent Activity[/font]"
                        markup: True
                        font_style: "H6"
                        size_hint_y: None
                        height: "32dp"
                        theme_text_color: "Primary"
                    
                    MDScrollView:
                        id: recent_activity_scroll
                        
                        MDList:
                            id: recent_activity_list
                            spacing: "8dp"
                            size_hint_y: None
                            height: self.minimum_height

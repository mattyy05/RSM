#:kivy 2.0.0

<FinancialStatementsScreen>:
    name: 'financial_statements'
    md_bg_color: [0.94, 0.94, 0.94, 1]

    MDBoxLayout:
        orientation: 'vertical'

        # Top Bar with Title
        MDTopAppBar:
            title: "[size=36][font=Brico]FINANCIAL STATEMENTS[/font][/size]"
            elevation: 0
            md_bg_color: [0.639, 0.114, 0.114, 1]
            specific_text_color: [1, 1, 1, 1]  # White
            left_action_items: [['arrow-left', lambda x: root.go_back()]]
            right_action_items: [['refresh', lambda x: root.refresh_statements()]]
            anchor_title: "center"

        # Header Section
        MDCard:
            size_hint_y: None
            height: "80dp"
            md_bg_color: [0.533, 0.620, 0.451, 1]  # Green
            padding: "16dp"
            elevation: 1
            radius: [8, 8, 8, 8]
            
            MDBoxLayout:
                orientation: 'horizontal'
                spacing: "16dp"
                
                MDBoxLayout:
                    orientation: 'vertical'
                    spacing: "4dp"
                    
                    MDLabel:
                        text: "[size=20][font=Brico]Financial Statements Dashboard[/font][/size]"
                        markup: True
                        theme_text_color: "Custom"
                        text_color: [1, 1, 1, 1]
                        font_style: "H6"
                        bold: True
                    
                    MDLabel:
                        text: "All three financial reports displayed side-by-side for comprehensive analysis and comparison"
                        theme_text_color: "Custom"
                        text_color: [1, 1, 1, 1]
                        font_style: "Body2"
                
                MDIcon:
                    icon: "file-chart-outline"
                    theme_icon_color: "Custom"
                    icon_color: [1, 1, 1, 1]
                    size_hint_x: None
                    width: "48dp"

        # Main Content with Three Column Layout
        MDScrollView:
            do_scroll_x: True
            do_scroll_y: True
            bar_width: "8dp"
            bar_color: [0.639, 0.114, 0.114, 0.5]
            bar_inactive_color: [0.8, 0.8, 0.8, 0.5]
            
            MDGridLayout:
                cols: 3
                spacing: "90dp"
                padding: "40dp"
                size_hint_x: None
                width: self.minimum_width
                size_hint_y: None
                height: self.minimum_height
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                
                # Income Statement Column
                MDCard:
                    md_bg_color: [1, 1, 1, 1]
                    elevation: 3
                    radius: [12, 12, 12, 12]
                    size_hint_x: None
                    width: "420dp"
                    size_hint_y: None
                    height: "700dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "20dp"
                        spacing: "16dp"

                        # Header
                        MDCard:
                            md_bg_color: [0.639, 0.114, 0.114, 1]
                            size_hint_y: None
                            height: "64dp"
                            elevation: 1
                            radius: [8, 8, 8, 8]
                            
                            MDBoxLayout:
                                orientation: 'horizontal'
                                spacing: "10dp"
                                padding: "16dp"

                                MDIcon:
                                    icon: "chart-line"
                                    theme_icon_color: "Custom"
                                    icon_color: [1, 1, 1, 1]
                                    size_hint_x: None
                                    width: "28dp"

                                MDLabel:
                                    text: "[size=18][font=Brico]INCOME STATEMENT[/font][/size]"
                                    markup: True
                                    theme_text_color: "Custom"
                                    text_color: [1, 1, 1, 1]
                                    bold: True
                                    halign: "center"

                        # Content
                        MDScrollView:
                            do_scroll_x: False
                            do_scroll_y: True
                            bar_width: "6dp"
                            
                            MDLabel:
                                id: income_statement_content
                                text: "Loading Income Statement..."
                                theme_text_color: "Primary"
                                font_size: "12sp"
                                text_size: self.width, None
                                size_hint_y: None
                                height: self.texture_size[1]
                                halign: "left"
                                valign: "top"
                                markup: True

                # Capital Statement Column
                MDCard:
                    md_bg_color: [1, 1, 1, 1]
                    elevation: 3
                    radius: [12, 12, 12, 12]
                    size_hint_x: None
                    width: "420dp"
                    size_hint_y: None
                    height: "700dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "20dp"
                        spacing: "16dp"

                        # Header
                        MDCard:
                            md_bg_color: [0.533, 0.620, 0.451, 1]
                            size_hint_y: None
                            height: "64dp"
                            elevation: 1
                            radius: [8, 8, 8, 8]
                            
                            MDBoxLayout:
                                orientation: 'horizontal'
                                spacing: "10dp"
                                padding: "16dp"

                                MDIcon:
                                    icon: "account-cash"
                                    theme_icon_color: "Custom"
                                    icon_color: [1, 1, 1, 1]
                                    size_hint_x: None
                                    width: "28dp"

                                MDLabel:
                                    text: "[size=18][font=Brico]CAPITAL STATEMENT[/font][/size]"
                                    markup: True
                                    theme_text_color: "Custom"
                                    text_color: [1, 1, 1, 1]
                                    bold: True
                                    halign: "center"

                        # Content
                        MDScrollView:
                            do_scroll_x: False
                            do_scroll_y: True
                            bar_width: "6dp"
                            
                            MDLabel:
                                id: capital_statement_content
                                text: "Loading Capital Statement..."
                                theme_text_color: "Primary"
                                font_size: "12sp"
                                text_size: self.width, None
                                size_hint_y: None
                                height: self.texture_size[1]
                                halign: "left"
                                valign: "top"
                                markup: True

                # Financial Position Column
                MDCard:
                    md_bg_color: [1, 1, 1, 1]
                    elevation: 3
                    radius: [12, 12, 12, 12]
                    size_hint_x: None
                    width: "420dp"
                    size_hint_y: None
                    height: "700dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "20dp"
                        spacing: "16dp"

                        # Header
                        MDCard:
                            md_bg_color: [0.208, 0.369, 0.584, 1]
                            size_hint_y: None
                            height: "64dp"
                            elevation: 1
                            radius: [8, 8, 8, 8]
                            
                            MDBoxLayout:
                                orientation: 'horizontal'
                                spacing: "10dp"
                                padding: "16dp"

                                MDIcon:
                                    icon: "scale-balance"
                                    theme_icon_color: "Custom"
                                    icon_color: [1, 1, 1, 1]
                                    size_hint_x: None
                                    width: "28dp"

                                MDLabel:
                                    text: "[size=18][font=Brico]FINANCIAL POSITION[/font][/size]"
                                    markup: True
                                    theme_text_color: "Custom"
                                    text_color: [1, 1, 1, 1]
                                    bold: True
                                    halign: "center"

                        # Content
                        MDScrollView:
                            do_scroll_x: False
                            do_scroll_y: True
                            bar_width: "6dp"
                            
                            MDLabel:
                                id: financial_position_content
                                text: "Loading Financial Position..."
                                theme_text_color: "Primary"
                                font_size: "12sp"
                                text_size: self.width, None
                                size_hint_y: None
                                height: self.texture_size[1]
                                halign: "left"
                                valign: "top"
                                markup: True

        # Footer with Status
        MDCard:
            size_hint_y: None
            height: "60dp"
            md_bg_color: [0.95, 0.95, 0.95, 1]
            padding: "16dp"
            elevation: 0
            
            MDBoxLayout:
                orientation: 'horizontal'
                
                MDLabel:
                    text: "Financial Statements - Generated Today"
                    theme_text_color: "Secondary"
                    font_style: "Caption"
                    halign: "left"
                
                MDLabel:
                    id: user_info_footer
                    text: "User: Not logged in"
                    theme_text_color: "Secondary"
                    font_style: "Caption"
                    halign: "right"
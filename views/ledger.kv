
#:kivy 2.0.0

<LedgerScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        
        # Top Bar
        MDTopAppBar:
            elevation: 0
            md_bg_color: [0.639, 0.114, 0.114, 1]  # App theme color

            MDLabel:
                text: "GENERAL LEDGER"
                font_name: "Brico"
                font_size: "40sp"
                halign: "center"
                valign: "middle"
                size_hint_y: None
                height: self.texture_size[1]
                theme_text_color: "Custom"
                text_color: [1, 1, 1, 1]  # White


            MDBoxLayout:
                orientation: 'horizontal'
                spacing: "8dp"
                size_hint_x: None
                width: "300dp"
                pos_hint: {"center_y": 0.5}
                padding: "16dp"
                spacing: "16dp"                   
                
                MDFlatButton:
                    text: "Back"
                    size_hint_x: None
                    width: "80dp"
                    md_bg_color: [1, 1, 1, 1]
                    text_color: [0.639, 0.114, 0.114, 1]
                    on_release: root.switch_screen('reports')
        
        MDBoxLayout:
            orientation: 'vertical'
            padding: "16dp"
            spacing: "16dp"
            
            # Stats Cards
            MDGridLayout:
                cols: 3
                spacing: "16dp"
                size_hint_y: None
                height: "80dp"
                
                # Total Accounts Card
                MDCard:
                    md_bg_color: [0.533, 0.620, 0.451, 1]
                    elevation: 0
                    padding: "8dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "Total Accounts"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            font_style: "Caption"
                        
                        MDLabel:
                            id: total_accounts_label
                            text: "0"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            font_style: "H6"
                            bold: True
                
                # Total Entries Card
                MDCard:
                    md_bg_color: [0.533, 0.620, 0.451, 1]
                    elevation: 0
                    padding: "8dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "Journal Entries"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            font_style: "Caption"
                        
                        MDLabel:
                            id: total_entries_label
                            text: "0"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            font_style: "H6"
                            bold: True
                
                # Trial Balance Status Card
                MDCard:
                    md_bg_color: [0.533, 0.620, 0.451, 1]
                    elevation: 0
                    padding: "8dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "Trial Balance"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            font_style: "Caption"
                        
                        MDLabel:
                            id: trial_balance_label
                            text: "Checking..."
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            font_style: "Body2"
                            bold: True
            
            # Main Content Area
            MDBoxLayout:
                orientation: 'horizontal'
                spacing: "16dp"
                
                # Left Side - Account List
                MDCard:
                    size_hint_x: 0.4
                    elevation: 0
                    line_color: [0.9, 0.9, 0.9, 1]
                    line_width: 1
                    padding: "16dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "12dp"
                        
                        MDLabel:
                            text: "[size=18][font=Brico]Chart of Accounts[/font][/size]"
                            markup: True
                            size_hint_y: None
                            height: "40dp"
                            theme_text_color: "Primary"
                        
                        MDScrollView:
                            MDBoxLayout:
                                id: account_list
                                orientation: 'vertical'
                                spacing: "8dp"
                                size_hint_y: None
                                height: self.minimum_height
                
                # Right Side - Ledger Display
                MDCard:
                    size_hint_x: 0.6
                    elevation: 0
                    line_color: [0.9, 0.9, 0.9, 1]
                    line_width: 1
                    padding: "16dp"
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing: "12dp"
                        
                        MDLabel:
                            id: selected_account_label
                            text: "Select an account to view its ledger"
                            size_hint_y: None
                            height: "40dp"
                            theme_text_color: "Primary"
                            font_style: "Subtitle1"
                        
                        MDScrollView:
                            MDBoxLayout:
                                id: ledger_display
                                orientation: 'vertical'
                                spacing: "4dp"
                                size_hint_y: None
                                height: self.minimum_height
                                size_hint_y: None
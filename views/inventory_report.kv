#:kivy 2.0.0

<InventoryReportScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        
        # Top Bar
        MDTopAppBar:
            title: "[size=40][font=Brico]INVENTORY REPORT[/font][/size]"
            elevation: 0
            md_bg_color: [0.639, 0.114, 0.114, 1]  # #a31d1d
            specific_text_color: [1, 1, 1, 1]  # White
            left_action_items: [['arrow-left', lambda x: root.go_back()]]
            right_action_items: [["refresh", lambda x: root.refresh_report()]]
            anchor_title: "center"
        
        MDBoxLayout:
            orientation: 'vertical'
            padding: "16dp"
            spacing: "16dp"
            
            # Summary Statistics Cards
            MDGridLayout:
                cols: 6
                spacing: "16dp"
                size_hint_y: None
                height: "100dp"
                
                # Total Products Card
                MDCard:
                    md_bg_color: [0.533, 0.620, 0.451, 1]  # Green
                    radius: [8, 8, 8, 8]
                    elevation: 2
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "8dp"
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "[size=16][font=Brico]TOTAL PRODUCTS[/font][/size]"
                            markup: True
                            halign: "center"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            
                        MDLabel:
                            id: total_products_label
                            text: "0"
                            halign: "center"
                            font_style: "H5"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            bold: True
                
                # Total Value Card
                MDCard:
                    md_bg_color: [0.533, 0.620, 0.451, 1]  # Green
                    radius: [8, 8, 8, 8]
                    elevation: 2
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "8dp"
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "[size=16][font=Brico]TOTAL VALUE[/font][/size]"
                            markup: True
                            halign: "center"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            
                        MDLabel:
                            id: total_value_label
                            text: "â‚±0.00"
                            halign: "center"
                            font_style: "H6"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            bold: True
                
                # Low Stock Card
                MDCard:
                    md_bg_color: [1, 0.6, 0, 1]  # Orange
                    radius: [8, 8, 8, 8]
                    elevation: 2
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "8dp"
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "[size=16][font=Brico]LOW STOCK[/font][/size]"
                            markup: True
                            halign: "center"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            
                        MDLabel:
                            id: low_stock_label
                            text: "0"
                            halign: "center"
                            font_style: "H5"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            bold: True
                
                # Fast Moving Card
                MDCard:
                    md_bg_color: [0, 0.8, 0, 1]  # Bright Green
                    radius: [8, 8, 8, 8]
                    elevation: 2
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "8dp"
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "[size=16][font=Brico]FAST MOVING[/font][/size]"
                            markup: True
                            halign: "center"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            
                        MDLabel:
                            id: fast_moving_label
                            text: "0"
                            halign: "center"
                            font_style: "H5"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            bold: True
                
                # Stagnant Card
                MDCard:
                    md_bg_color: [1, 0, 0, 1]  # Red
                    radius: [8, 8, 8, 8]
                    elevation: 2
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "8dp"
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "[size=16][font=Brico]STAGNANT[/font][/size]"
                            markup: True
                            halign: "center"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            
                        MDLabel:
                            id: stagnant_label
                            text: "0"
                            halign: "center"
                            font_style: "H5"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            bold: True
                
                # Average Turnover Card
                MDCard:
                    md_bg_color: [0, 0.6, 0.8, 1]  # Blue
                    radius: [8, 8, 8, 8]
                    elevation: 2
                    
                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: "8dp"
                        spacing: "4dp"
                        
                        MDLabel:
                            text: "[size=16][font=Brico]AVG TURNOVER[/font][/size]"
                            markup: True
                            halign: "center"
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            
                        MDLabel:
                            id: avg_turnover_label
                            text: "0.0x"
                            halign: "center"
                            font_style: "H6"
                            theme_text_color: "Custom"
                            text_color: [1, 1, 1, 1]
                            bold: True
            
            # Control Panel
            MDCard:
                size_hint_y: None
                height: "120dp"
                elevation: 1
                padding: "16dp"
                md_bg_color: [0.95, 0.95, 0.95, 1]
                
                MDBoxLayout:
                    orientation: 'horizontal'
                    spacing: "16dp"
                    
                    # Period Selection
                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.25
                        spacing: "8dp"
                        
                        MDLabel:
                            text: "Period:"
                            font_style: "Caption"
                            size_hint_y: None
                            height: "24dp"
                            theme_text_color: "Secondary"
                        
                        MDBoxLayout:
                            orientation: 'horizontal'
                            spacing: "4dp"
                            size_hint_y: None
                            height: "36dp"
                            
                            MDFlatButton:
                                text: "Daily"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.639, 0.114, 0.114, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.change_period('daily')
                            
                            MDFlatButton:
                                text: "Weekly"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.639, 0.114, 0.114, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.change_period('weekly')
                            
                            MDFlatButton:
                                text: "Monthly"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.533, 0.620, 0.451, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.change_period('monthly')
                    
                    # Sort Selection
                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.35
                        spacing: "8dp"
                        
                        MDLabel:
                            text: "Sort by:"
                            font_style: "Caption"
                            size_hint_y: None
                            height: "24dp"
                            theme_text_color: "Secondary"
                        
                        MDBoxLayout:
                            orientation: 'horizontal'
                            spacing: "2dp"
                            size_hint_y: None
                            height: "36dp"
                            
                            MDFlatButton:
                                text: "Name"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.533, 0.620, 0.451, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.change_sort('name')
                            
                            MDFlatButton:
                                text: "Sales"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.639, 0.114, 0.114, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.change_sort('sales')
                            
                            MDFlatButton:
                                text: "Turnover"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.639, 0.114, 0.114, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.change_sort('turnover')
                            
                            MDFlatButton:
                                text: "Stock"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.639, 0.114, 0.114, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.change_sort('stock')
                    
                    # Actions
                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.25
                        spacing: "8dp"
                        
                        MDLabel:
                            text: "Actions:"
                            font_style: "Caption"
                            size_hint_y: None
                            height: "24dp"
                            theme_text_color: "Secondary"
                        
                        MDBoxLayout:
                            orientation: 'horizontal'
                            spacing: "4dp"
                            size_hint_y: None
                            height: "36dp"
                            
                            MDFlatButton:
                                text: "Refresh"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0, 0.6, 0.8, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.refresh_report()
                            
                            MDFlatButton:
                                text: "Export"
                                size_hint_x: 1
                                size_hint_y: None
                                height: "32dp"
                                font_style: "Caption"
                                theme_bg_color: "Custom"
                                md_bg_color: [0.5, 0.5, 0.5, 1]
                                theme_text_color: "Custom"
                                text_color: [1, 1, 1, 1]
                                on_release: root.export_report()
                    
                    # Status
                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.15
                        spacing: "8dp"
                        
                        MDLabel:
                            text: "Status:"
                            font_style: "Caption"
                            size_hint_y: None
                            height: "24dp"
                            theme_text_color: "Secondary"
                        
                        MDLabel:
                            id: status_label
                            text: "Ready"
                            font_style: "Caption"
                            theme_text_color: "Secondary"
                            halign: "center"
                            size_hint_y: None
                            height: "36dp"
            
            # Report Content
            MDCard:
                elevation: 1
                padding: "16dp"
                
                MDBoxLayout:
                    orientation: 'vertical'
                    spacing: "8dp"
                    
                    # Report Header
                    MDLabel:
                        text: "[size=20][font=Brico]Product Overview & Sales Analysis[/font][/size]"
                        markup: True
                        font_style: "H6"
                        size_hint_y: None
                        height: "32dp"
                        theme_text_color: "Primary"
                    
                    # Column Headers
                    MDBoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: "32dp"
                        spacing: "8dp"
                        padding: [8, 0, 8, 0]
                        canvas.before:
                            Color:
                                rgba: 0.9, 0.9, 0.9, 1
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        
                        MDLabel:
                            text: "[b]Product Details[/b]"
                            markup: True
                            font_style: "Subtitle2"
                            size_hint_x: 0.3
                            halign: "left"
                            theme_text_color: "Primary"
                        
                        MDLabel:
                            text: "[b]Stock & Pricing[/b]"
                            markup: True
                            font_style: "Subtitle2"
                            size_hint_x: 0.25
                            halign: "center"
                            theme_text_color: "Primary"
                        
                        MDLabel:
                            text: "[b]Sales Performance[/b]"
                            markup: True
                            font_style: "Subtitle2"
                            size_hint_x: 0.25
                            halign: "center"
                            theme_text_color: "Primary"
                        
                        MDLabel:
                            text: "[b]Movement Status[/b]"
                            markup: True
                            font_style: "Subtitle2"
                            size_hint_x: 0.2
                            halign: "right"
                            theme_text_color: "Primary"
                    
                    # Scrollable Product List
                    MDScrollView:
                        MDBoxLayout:
                            id: inventory_list
                            orientation: 'vertical'
                            spacing: "8dp"
                            size_hint_y: None
                            height: self.minimum_height
                            padding: [0, 8, 0, 8]
                            
                            # Dynamic product cards will be added here by Python code